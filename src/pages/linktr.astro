---
import LinktrLayout from '../layouts/LinktrLayout.astro';
import Icons from '../components/Icons/Icons.astro';
import LanguagePickerLinktr from '../components/LanguagePickers/LanguagePickerLinktr.astro';

const metadata = {
    title: 'LINKTR',
    description: 'Itt olvashatsz Fehér Panniról, a Bandha Works művészeti vezetőjéről.',
};

const links = [
    { label: 'Weboldalam', href: 'https://example.com' },
    { label: 'Instagram', href: 'https://instagram.com/teprofilod' },
    { label: 'Kapcsolat', href: 'mailto:valaki@example.com' },
];

// const { lang = 'hu' } = Astro.url.searchParams;
const currentLanguage = Astro.currentLocale;
---

<LinktrLayout title={metadata.title} description={metadata.description} language="Hungarian">
    <div class="linktr-container display-flex display-flex--direction-column align-items-center mt-40px">
        <Icons name="BwSymbol" color="white" />
        <h3 class="mt-20px mb-20px">@bandhaworks</h3>
        <LanguagePickerLinktr />
        <div class="links">
            {
                links.map((link) => (
                    <a href={link.href} class="link-btn">
                        {link.label}
                    </a>
                ))
            }
        </div>
    </div>
</LinktrLayout>

<script is:inline>
    (function () {
        const url = new URL(window.location.href);
        const hasLang = url.searchParams.has('lang');

        if (!hasLang) {
            const fallback = `${url.pathname}?lang=hu`;
            window.location.replace(fallback);
        }
    })();
</script>
