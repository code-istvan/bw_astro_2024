---
import Pagination from '../../components/Blog/Pagination.astro';
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/Blog/PostCard.astro';
import { getEntryBySlug, type CollectionEntry } from 'astro:content';

export async function getStaticPaths({ paginate }) {
    const allPosts = await Astro.glob('../../content/blog/*.md');
    return paginate(allPosts, { pageSize: 3 });
}

type Props = {
    post: CollectionEntry<'blog'>;
};

const { page } = Astro.props;
const pageTitle = `Blog`;
---

<BaseLayout title={pageTitle}>
    <ul>
        {page.data.map((post) => <PostCard frontmatter={post.frontmatter} url={post.url} />)}
    </ul>
    <Pagination prevUrl={page.url.prev} nextUrl={page.url.next} />
</BaseLayout>
