---
import chevron from '../images/svg/accordion_chevron.svg?raw';

const { title, className, books } = Astro.props;
---

<div class="accordion__section">
    <button class="accordion" id="accordion-toggle">
        <div class="accordion-chevron">
            <div class="accordion__title-container"><h3 class={className}>{title}</h3></div>
            <div class="accordion__svg-container">
                <svg
                    class="accordion__icon"
                    id="accordion-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="hsl(0, 0%, 100%)"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path d="M10.5 10V2H13.5V10H22V13H13.5V22H10.5V13H2V10H10.5Z" fill="orange"></path>
                </svg>
            </div>
        </div>
    </button>
    <div id="accordion-content" class="accordion__content">
        <div class="accordion__text">
            <div class="row unordered-list-style mb-40px">
                <ul>
                    {
                        books.map((book) => (
                            <li>
                                {book.link ? (
                                    <a href={book.link} target="_blank" class="link-enhanced link-orange">
                                        <strong>{book.title}</strong>
                                    </a>
                                ) : (
                                    <strong>{book.title}</strong>
                                )}
                                - {book.author} <br />
                            </li>
                        ))
                    }
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
    const accordionToggle = document.getElementById('accordion-toggle');
    const accordionContent = document.getElementById('accordion-content');
    const accordionIcon = document.getElementById('accordion-icon');

    accordionToggle.addEventListener('click', () => {
        const contentHeight = accordionContent.scrollHeight;

        if (accordionContent.style.maxHeight === '0px' || !accordionContent.style.maxHeight) {
            accordionContent.style.maxHeight = contentHeight + 'px';
            accordionIcon.classList.add('rotate__90deg');
        } else {
            accordionContent.style.maxHeight = '0px';
            accordionIcon.classList.remove('rotate__90deg');
        }
    });
</script>

<style>
    @import '/src/sass/global';

    .accordion__section {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 100%;
    }

    .accordion {
        background-color: transparent;
        color: #444;
        cursor: pointer;
        display: flex;
        align-items: center;
        border: none;
        outline: none;
        transition: background-color 0.6s ease;
        /* width: 24px; */
        width: 100%;
        padding: 0;
    }

    .accordion__title {
        font-family: var(--font-family-secondary);
        font-weight: var(--font-weight-semi-bold);
        font-size: var(--body-font-size-mobile);
        text-align: left;
    }

    @media (min-width: 768px) {
        .accordion__title {
            font-size: var(--body-font-size-desktop);
        }
    }

    .accordion__icon {
        margin-right: auto;
        transition: transform 0.6s ease;
        flex-shrink: 0;
    }

    .rotate__90deg {
        transform: rotate(45deg);
    }

    .accordion__content {
        background-color: var(--color-shades-black);
        overflow: hidden;
        transition: max-height 0.6s ease;
        max-height: 0;
    }

    .accordion__text {
        /* width: inherit; */
        padding-bottom: 4px;
        padding-right: 12px;
    }

    .accordion-chevron {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
        padding: 0;
        /* gap: 4px; */
        /* height: 40px; */
    }
    .accordion__title-container h3 {
        color: white;
    }

    .accordion__svg-container svg {
        height: 40px;
        width: 40px;
    }
</style>
